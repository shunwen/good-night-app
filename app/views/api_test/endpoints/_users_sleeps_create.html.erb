<%
  endpoint = {
    name: "Users::Sleeps#create",
    method: "POST",
    url: "/users/sleeps",
    description: "Create a sleep record for current user",
    sample_payload: { 
      sleep: { 
        started_at_raw: "2024-12-15 22:30:00 PST",
        stopped_at_raw: "2024-12-16 06:45:00 PST"
      } 
    },
    requires_auth: true
  }
  index = 1
%>

<div class="endpoint">
  <div class="endpoint-header">
    <span class="method"><%= endpoint[:method] %></span>
    <span class="url"><%= endpoint[:url] %></span>
    <span class="desc"><%= endpoint[:description] %></span>
    <span class="<%= endpoint[:requires_auth] ? 'auth-required' : 'no-auth' %>">
      <%= endpoint[:requires_auth] ? 'Auth Required' : 'Public' %>
    </span>
  </div>
  
  <% if endpoint[:sample_payload] %>
    <details class="payload">
      <summary>Payload</summary>
      <pre><%= JSON.pretty_generate(endpoint[:sample_payload]) %></pre>
    </details>
  <% end %>
  
  <div class="actions">
    <button onclick="testEndpoint('<%= endpoint[:method] %>', '<%= endpoint[:url] %>', <%= endpoint[:sample_payload]&.to_json || 'null' %>)">
      Create Sleep Record
    </button>
    <button onclick="createTestData('<%= endpoint[:method] %>', '<%= endpoint[:url] %>', <%= endpoint[:sample_payload]&.to_json || 'null' %>, 300)">
      Generate 300 Records
    </button>
  </div>
  
  <div id="result-<%= index %>" class="result hidden">
    <div class="tabs">
      <button class="tab active" onclick="showTab(this, 'summary-<%= index %>')">Summary</button>
      <button class="tab" onclick="showTab(this, 'request-<%= index %>')">Request</button>
      <button class="tab" onclick="showTab(this, 'response-<%= index %>')">Response</button>
    </div>
    <div id="summary-<%= index %>" class="tab-content active">
      <pre class="content"></pre>
    </div>
    <div id="request-<%= index %>" class="tab-content">
      <pre class="content"></pre>
    </div>
    <div id="response-<%= index %>" class="tab-content">
      <pre class="content"></pre>
    </div>
  </div>
</div>